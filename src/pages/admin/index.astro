---
import AdminLayout from '../../layouts/AdminLayout.astro';
import StatsCards from '../../components/StatsCards.astro';
import GuestTable from '../../components/GuestTable.astro';
import { getAllGuests, getStats } from '../../lib/db';

const stats = await getStats();
const guests = await getAllGuests();
---
<AdminLayout title="Dashboard">
  <div class="mb-6 flex items-center justify-between">
    <h1 class="font-[var(--font-display)] text-3xl text-[var(--color-gold)]">Dashboard</h1>
    <a
      href="/admin/guests/new"
      class="px-4 py-2 bg-[var(--color-gold)] text-[var(--color-bg-dark)] font-bold rounded-lg hover:bg-[var(--color-gold-light)] transition-colors text-sm"
    >
      + Neuen Gast anlegen
    </a>
  </div>

  <StatsCards
    total={stats.total}
    accepted={stats.accepted}
    declined={stats.declined}
    pending={stats.pending}
    plusOnes={stats.plusOnes}
  />

  <div class="admin-card">
    <h2 class="font-[var(--font-display)] text-xl text-[var(--color-gold)] mb-4">GÃ¤steliste</h2>
    <GuestTable guests={guests} />
  </div>
</AdminLayout>
